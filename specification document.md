# Flask アプリケーション仕様書

## 1. アプリケーションの目的

このアプリケーションは、ユーザーが日々の学習活動を記録し、学習進捗を視覚化するための「学習トラッキングシステム」です。

## 2. 必要なエンドポイントとその機能

- `/register`（POST）: 新規ユーザー登録。必要情報を提供してアカウントを作成する。
- `/login`（POST）: ユーザーログイン。ユーザー名とパスワードで認証を行う。
- `/logout`（GET）: ログアウト。現在のユーザーセッションを終了する。
- `/activities`（GET）: 学習活動の一覧表示。ユーザーがこれまでに記録した学習活動のリストを取得する。
- `/activities`（POST）: 学習活動の新規記録。新たな学習活動を記録する。
- `/activities/<id>`（PUT）: 学習活動の更新。特定の学習活動の詳細情報を更新する。
- `/activities/<id>`（DELETE）: 学習活動の削除。特定の学習活動を削除する。
- `/reports`（GET）: 学習報告の生成。ユーザーの学習進捗に基づく報告書を生成する。

## 3. エンドポイントごとの入力と出力

1. `/register`（POST）
    - 入力: ユーザー名、パスワード
    - 出力: 登録成功メッセージ
2. `/login`（POST）
    - 入力: ユーザー名、パスワード
    - 出力: ログイン成功メッセージ、セッション情報
3. `/logout`（GET）
    - 入力: なし
    - 出力: ログアウト成功メッセージ
4. `/activities`（GET）
    - 入力: なし
    - 出力: ユーザーの学習活動のリスト
5. `/activities`（POST）
    - 入力: 学習活動のタイトル、説明、時間
    - 出力: 新規作成された学習活動のID
6. `/activities/<id>`（PUT）
    - 入力: 学習活動のタイトル、説明、時間
    - 出力: 更新が成功したかどうかのメッセージ
7. `/activities/<id>`（DELETE）
    - 入力: なし
    - 出力: 削除が成功したかどうかのメッセージ
8. `/reports`（GET）
    - 入力: なし
    - 出力: 学習活動の進捗報告書

## 4. データベースのスキーマ

SQLiteを使用。以下の2つのテーブルが必要。

1. `Users`
    - id (integer, primary key, autoincrement)
    - username (text, unique)
    - password (text)

2. `Activities`
    - id (integer, primary key, autoincrement)
    - user_id (integer, foreign key[Users.id])
    - title (text)
    - description (text)
    - hours (integer)
    - date (date, default current date)

## 5. その他特殊な要件

- 認証・認可：ユーザーはアカウントを作成し、それを使ってシステムにログインする必要があります。ユーザーは自分の学習活動のみを作成、更新、削除できます。
- ロギング：全てのリクエストとレスポンスはログに記録され、エラーが発生した場合はスタックトレースも記録されます。
- エラーハンドリング：エラー発生時は適切なHTTPステータスコードとエラーメッセージをレスポンスとして返す必要があります。
- セキュリティ：パスワードはハッシュ化されて保存され、平文は一切保存されません。また、セッション管理にはセキュアなトークンを使用します。